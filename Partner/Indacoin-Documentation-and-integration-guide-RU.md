### API
На этой странице вы можете найти методы, которые используются для подключения вашего сервиса к функциями обмена криптовалюты Indacoin. Если вы хотите предоставить своим клиентам возможность оплаты с помощью кредитных/дебетовых карт, вы сможете сделать это с помощью нашего API.

## 1. Введение
### 1.1. Аудитория
Данный документ предназначен для технических специалистов парнтеров, ответственных за интеграцию платежной системы Indacoin. Для понимания изложенной в документе информации, читателю необходимо иметь представление о языках программирования, html-формах и клиент-серверной технологии (web). 
Наша платформа предоставляет 2 варианта интеграции (простая и стантдартная), ознакомиться с которыми можно в пунктах 2 и 3 соответственно.


### 1.2. Требования к платформе партнера

Для успешной интеграции, веб-сайт Продавца должен иметь возможность:
1. Перенаправлять пользователей на платежную страницу Indacoin методом GET;
2. Принимать и обрабатывать запросы от платежной системы Indacoin на заданные URL, выполненные методами POST или GET (в зависимости от настройки).

### 1.3. Дополнительные возможности партнера при работе с платежной системой Indacoin
1. Изменение дизайна платежной страницы
Для изменения дизайна платежной страницы партнеру необходимо загрузить кастомный CSS файл в своём личном кабинете. (https://indacoin.com/gw/partneradmin)

2.  Уведомление партнера об оплате - Callback
После оплаты мы отправим вам callback на адрес, указанный в личном кабинете. 
(https://indacoin.com/gw/partneradmin) 

3. Создание страниц успешной и неуспешной оплаты на платформе партнера
Партнер может реализовать на своей платформе страницы успешной и неуспешной оплаты, на которые будет происходить редирект после оплаты. Ссылки на них необходимо указать в личном кабинете.
(https://indacoin.com/gw/partneradmin)


### 1.4. Получение основной информации, необходимой для интеграции
Вы получите доступы к личному кабинету, логин которого будет использоваться в параметре **partner**, а пароль - в параметре **secret**.

## 2. Простая интеграция (front-end)
### 2.1 Размещение платежной формы на платформе партнера и тестирование
Для отправки покупателей на страницу оплаты, партнеру необходимо разместить на своей платформе платежную форму, передающую необходимые для оплаты данные в Indacoin.


**Важно!** На этапе интеграции для проведения тестов необходимо использовать тестовую карту **(4111 1111 1111 1111, срок действия любой, больше текущей даты, любой CVC/CVV)** и тестовый **cur_to - INTT **(Indacoin Test Token). После проверки работоспособности всего необходимого функционала можно начинать проводить реальные платежи.


Параметры, которые необходимо передавать:

**partner** - имя партнера в системе Indacoin (string).

**cur_from** - обмениваемая валюта (USD, RUB, EUR, GBP, AUD, SEK, CAD, CHF, DKK, PLN, CZK, NOK) (string).

**cur_to** - short_name покупаемой криптовалюты, например BTC, ETH, WAVES и так далее (string).

**amount** - количество обмениваемой валюты (double). Минимальная сумма составляет 10 USD/EUR, максимальная - 6000 USD/EUR.

**address** - кошелек, на который зачисляется криптовалюта после покупки (string).

**user_id** - id покупателя в системе продавца (string).

Все запросы необходимо отправлять на **https://indacoin.com/gw/payment_form**.

Ниже приведен пример платежной формы. 

`<form action=https://indacoin.com/gw/payment_form method="GET">`

`<input type="hidden" name="partner" value="YourPartnerName" />`

`<input type="hidden" name="cur_from" value="USD" />`

`<input type="hidden" name="cur_to" value="BTC" />`

`<input type="hidden" name="amount" value="1000" />`

`<input type="hidden" name="adress" value="3P3QsMVK89JBNqZQv5zMAKG8FK3kJM4rjt" />`

`<input type="hidden" name="user_id" value="1" />`

`<input type="submit" value="Buy" />`

`</form>`




Пример в виде ссылки:
https://indacoin.com/gw/payment_form?partner=bitcoinist&cur_from=USD&cur_to=BCD&amount=100&address=1CGETsHqcQC5xU9y3oh6FMpZE4UPKADy5m&user_id=test%40gmail.com

### 2.2 Возможные статусы транзакции 

**NotFound** — транзакция не найдена, платеж не был выполнен;

**Chargeback** — обратный перевод денег клиенту по запросу банка;

**Declined** — платеж был отклонен, скорее всего, из-за того, что банковская карта не поддерживает 3DS;

**Cancelled** — платеж не был произведен в течение нескольких часов после создания транзакции;

**Failed** — обычный случай, платеж не состоялся по разным причинам;
 
**Draft** —  оплата еще не была произведена;

**Paid** — деньги были списаны с банковского счета пользователя;

**Verification** — пользователь запустил процесс верификации;

**FundsSent** — монеты были отправлены на адрес кошелька пользователя, но еще не получены;

**Finished** — монеты были успешно получены пользователем.

## 3. Интеграция с использованием API

### 3.1 API_DOC
С описанием работы API можно ознакомиться по ссылке: https://indacoin.com/ru-RU/api_doc

### 3.2. Простейший алгоритм интеграции по API
Самый простой вариант интеграции предполагает создание транзакции методом createTransaction и последующую генерацию ссылки с использованием transaction_id, partnername и secret-ключа. 
Пример:

`$transaction_id =; //get it from createTransaction method`

`$string=$partnername."_".$transaction_id;`

`$secret="secret";`

`$sig = base64_encode(base64_encode(hash_hmac('sha256', $string, $secret,true)));`





